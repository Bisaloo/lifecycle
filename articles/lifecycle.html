<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Usage of the lifecycle package • lifecycle</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Usage of the lifecycle package">
<meta property="og:description" content="lifecycle">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-115082821-1"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115082821-1');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">lifecycle</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../articles/lifecycle.html">Get started</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    News
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../news/index.html">Changelog</a>
    </li>
  </ul>
</li>
<li>
  <a href="https://github.com/r-lib/lifecycle/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="lifecycle_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Usage of the lifecycle package</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/r-lib/lifecycle/blob/master/vignettes/lifecycle.Rmd"><code>vignettes/lifecycle.Rmd</code></a></small>
      <div class="hidden name"><code>lifecycle.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://lifecycle.r-lib.org/">lifecycle</a></span><span class="op">)</span></code></pre></div>
<p>Use lifecycle to document the status of your exported functions and arguments. It provides a standard way to describe lifecycle stage in the documentation, and tools to encourage users away from deprecated functions.</p>
<div id="stages" class="section level2">
<h2 class="hasAnchor">
<a href="#stages" class="anchor"></a>Stages</h2>
<p>The lifecycle stages for functions<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a> are summarised in the figure below.</p>
<p><img src="figures/lifecycle.svg" width="75%"></p>
<p>The default development stage is <img src="figures/lifecycle-stable.svg" style="vertical-align:middle" alt="Stable">. A function is considered stable when the author is sufficiently happy with its interface and behaviour to share it with a large number of users. Stable features come with guarantees. If breaking changes are needed, they will occur gradually, through the deprecation process described below.</p>
<p>The stability of exported functions can be further refined based on the version number of the package they are exported from. In &gt;=1.0.0 packages, the main functionality is considered “done” by the author. Breaking changes and deprecations are unlikely. In sub-1.0.0 packages, some parts of the package (internal backend, external UI, …) still need some work and changes are possible. Stable &gt;=1.0.0 packages are the safest to depend and rely on.</p>
<p>Some packages and functions are published in an <img src="figures/lifecycle-experimental.svg" style="vertical-align:middle" alt="Experimental"> stage. Experimental features are made available so people can try them out and provide feedback, but the author makes no promises to avoid breaking changes. A deprecation process for breaking changes is not guaranteed (but may still happen if sufficiently many users depend on the feature).</p>
<div id="end-of-life" class="section level3">
<h3 class="hasAnchor">
<a href="#end-of-life" class="anchor"></a>End of life</h3>
<p>There are two ways that a function might reach the end of its life: it might be superseded or deprecated.</p>
<ul>
<li>A <img src="figures/lifecycle-superseded.svg" alt="Superseded"><a href="#fn2" class="footnote-ref" id="fnref2"><sup>2</sup></a> function has a better alternative available, but the function itself is not going away. While a superseded function will not receive new features, it will be kept working for the foreseeable future so that existing code does not need to change. A superseded feature preserves all the guarantees of a stable feature, and is just as safe to use.</li>
<li>A <img src="figures/lifecycle-deprecated.svg" style="vertical-align:middle" alt="Deprecated"> function has a better alternative available and will be removed in the near future. Deprecated functions should also produce a message describing the alternative, and whenever you encounter a deprecation message in your code, you should make fixing it a priority.</li>
</ul>
<p>Particularly important functions can have two additional stages in the deprecation cycle:</p>
<ul>
<li><p>Soft-deprecated comes before deprecated. It’s a gentler form of deprecated designed to prevent new uses of a function and encourage package developers to move to a new for. Soft deprecated allows a package to change its extension interface in a way that downstream dependencies can adapt to before users are forced to change.</p></li>
<li><p>Defunct comes after deprecated. A defunct function is still exported, and a defunct argument is still part of the signature, but their usage will generate informative errors.</p></li>
</ul>
<p>Sometimes the author of function is no longer certain that a function is the optimal approach, but doesn’t yet know how to do it better. These functions can be marked as <img src="figures/lifecycle-questioning.svg" style="vertical-align:middle" alt="Questioning"> to give users a heads up that the author has doubts about the function.</p>
</div>
</div>
<div id="rd-badges" class="section level2">
<h2 class="hasAnchor">
<a href="#rd-badges" class="anchor"></a>Documentation</h2>
<p>Experimental, questioning, superseded, and deprecated (including soft-deprecated and defunct functions) should be clearly labelled in the document with a badge:</p>
<ul>
<li>
<p>Call <code>usethis::use_lifecycle()</code> to import the badges in your package. Then use <code><a href="../reference/badge.html">lifecycle::badge()</a></code> to insert a badge:</p>
<pre><code>#' \ifelse{html}{\out{&lt;a href='https://www.tidyverse.org/lifecycle/#experimental'&gt;&lt;img src='figures/lifecycle-experimental.svg' alt='Experimental lifecycle'&gt;&lt;/a&gt;}}{\strong{Experimental}}r lifecycle::badge("deprecated")</code></pre>
<p>This badge renders as text in non-HTML documentation. To document the status of a whole function, a good place to include the badge is at the top of the <code>@description</code> block. To document an argument, you can put the badge in the argument description.</p>
</li>
<li><p>You should also include a brief description of why the function is in that state.</p></li>
<li><p>For superseded and deprecated functions, rewrite the examples showing how to translate from the old to new syntax.</p></li>
<li><p>For deprecated functions, add <code>@keywords internal</code> and update <code>_pkgdown.yaml</code> (if you use pkgdown), so that they’re no longer listed in documentation indexes.</p></li>
</ul>
</div>
<div id="signals" class="section level2">
<h2 class="hasAnchor">
<a href="#signals" class="anchor"></a>Signals</h2>
<p>Deprecated functions should clearly signal their deprecation status. There are three levels of verbosity:</p>
<ul>
<li><p><strong>Soft deprecation</strong>: Call <code><a href="../reference/deprecate_soft.html">deprecate_soft()</a></code> to start warning users about the deprecation in the least disruptive way. This function only warns (a) users who try the feature from the global workspace (at most once every 8 hours), and (b) developers who directly use the feature (when running testthat tests). No warning is when the deprecated feature is called indirectly by another package.</p></li>
<li><p><strong>Deprecation</strong>: Call <code><a href="../reference/deprecate_soft.html">deprecate_warn()</a></code> to warn unconditionally about the deprecated feature. The warning is issued only once every 8 hours.</p></li>
<li><p><strong>Defunct</strong>: Call <code><a href="../reference/deprecate_soft.html">deprecate_stop()</a></code> to fail with an error.</p></li>
</ul>
<p>The following sections describe the details when deprecating functions and arguments.</p>
<div id="functions" class="section level3">
<h3 class="hasAnchor">
<a href="#functions" class="anchor"></a>Functions</h3>
<p>The first two arguments give the version where deprecation occurred<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a> and a description of what is deprecated:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/deprecate_soft.html">deprecate_warn</a></span><span class="op">(</span><span class="st">"1.0.0"</span>, <span class="st">"mypkg::foo()"</span><span class="op">)</span>
<span class="co">#&gt; Warning: `foo()` was deprecated in mypkg 1.0.0.</span></code></pre></div>
<p>Where possible, describe the replacement in the third argument:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/deprecate_soft.html">deprecate_warn</a></span><span class="op">(</span><span class="st">"1.0.0"</span>, <span class="st">"mypkg::foo()"</span>, <span class="st">"new()"</span><span class="op">)</span>
<span class="co">#&gt; Warning: `foo()` was deprecated in mypkg 1.0.0.</span>
<span class="co">#&gt; Please use `new()` instead.</span></code></pre></div>
<p>We explicitly mention the namespace in these examples, but you can typically omit the namespace because lifecycle will infer it from the calling environment. Specifying the namespace is mostly useful when the replacement is implemented in a different package.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># The new replacement</span>
<span class="va">foobar_adder</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">foo</span>, <span class="va">bar</span><span class="op">)</span> <span class="op">{</span>
  <span class="va">foo</span> <span class="op">+</span> <span class="va">bar</span>
<span class="op">}</span>

<span class="co"># The old function still exported for compatibility</span>
<span class="va">foobaz_adder</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">foo</span>, <span class="va">bar</span><span class="op">)</span> <span class="op">{</span>
  <span class="fu"><a href="../reference/deprecate_soft.html">deprecate_warn</a></span><span class="op">(</span><span class="st">"1.0.0"</span>, <span class="st">"foobaz_adder()"</span>, <span class="st">"foobar_adder()"</span><span class="op">)</span>
  <span class="fu">foobar_adder</span><span class="op">(</span><span class="va">foo</span>, <span class="va">bar</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
<div id="arguments" class="section level3">
<h3 class="hasAnchor">
<a href="#arguments" class="anchor"></a>Arguments</h3>
<p>The syntax for deprecating arguments is similar:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/deprecate_soft.html">deprecate_warn</a></span><span class="op">(</span><span class="st">"1.0.0"</span>, <span class="st">"mypkg::foo(arg = )"</span><span class="op">)</span>
<span class="co">#&gt; Warning: The `arg` argument of `foo()` is deprecated as of mypkg 1.0.0.</span>

<span class="fu"><a href="../reference/deprecate_soft.html">deprecate_warn</a></span><span class="op">(</span><span class="st">"1.0.0"</span>, <span class="st">"mypkg::foo(arg = )"</span>, <span class="st">"mypkg::foo(new = )"</span><span class="op">)</span>
<span class="co">#&gt; Warning: The `arg` argument of `foo()` is deprecated as of mypkg 1.0.0.</span>
<span class="co">#&gt; Please use the `new` argument instead.</span></code></pre></div>
<p>An argument can be partially deprecated by disallowing certain input types:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/deprecate_soft.html">deprecate_warn</a></span><span class="op">(</span><span class="st">"1.0.0"</span>, <span class="st">"mypkg::foo(arg = 'must be a scalar integer')"</span><span class="op">)</span>
<span class="co">#&gt; Warning: The `arg` argument of `foo()` must be a scalar integer as of mypkg</span>
<span class="co">#&gt; 1.0.0.</span></code></pre></div>
<p>lifecycle also provides the <code><a href="../reference/deprecated.html">deprecated()</a></code> sentinel to use as default argument. This provides self-documentation for your users and makes it possible for external tools to determine which arguments are deprecated. Test whether the argument was supplied by the caller with <code><a href="../reference/deprecated.html">lifecycle::is_present()</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">foobar_adder</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">foo</span>, <span class="va">bar</span>, <span class="va">baz</span> <span class="op">=</span> <span class="fu"><a href="../reference/deprecated.html">deprecated</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>
  <span class="co"># Check if user has supplied `baz` instead of `bar`</span>
  <span class="kw">if</span> <span class="op">(</span><span class="fu">lifecycle</span><span class="fu">::</span><span class="fu"><a href="../reference/deprecated.html">is_present</a></span><span class="op">(</span><span class="va">baz</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>

    <span class="co"># Signal the deprecation to the user</span>
    <span class="fu"><a href="../reference/deprecate_soft.html">deprecate_warn</a></span><span class="op">(</span><span class="st">"1.0.0"</span>, <span class="st">"foobar_adder(baz = )"</span>, <span class="st">"foobar_adder(bar = )"</span><span class="op">)</span>

    <span class="co"># Deal with the deprecated argument for compatibility</span>
    <span class="va">bar</span> <span class="op">&lt;-</span> <span class="va">baz</span>
  <span class="op">}</span>

  <span class="va">foo</span> <span class="op">+</span> <span class="va">bar</span>
<span class="op">}</span></code></pre></div>
</div>
</div>
<div id="workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#workflow" class="anchor"></a>Workflow</h2>
<div id="where-do-these-deprecation-warnings-come-from" class="section level3">
<h3 class="hasAnchor">
<a href="#where-do-these-deprecation-warnings-come-from" class="anchor"></a>Where do these deprecation warnings come from?</h3>
<p>Call <code><a href="../reference/last_warnings.html">lifecycle::last_warnings()</a></code> to see backtraces for all the deprecation warnings that were issued during the last top-level command.</p>
</div>
<div id="bumping-deprecation-stage" class="section level3">
<h3 class="hasAnchor">
<a href="#bumping-deprecation-stage" class="anchor"></a>Bumping deprecation stage</h3>
<p>Some manual search and replace is needed to bump the status of deprecated features. We recommend starting with defunct features and work your way up:</p>
<ol style="list-style-type: decimal">
<li><p>Search for <code><a href="../reference/deprecate_soft.html">deprecate_stop()</a></code> and remove the feature from the package. The feature is now archived.</p></li>
<li><p>Search for <code><a href="../reference/deprecate_soft.html">deprecate_warn()</a></code> and replace with <code><a href="../reference/deprecate_soft.html">deprecate_stop()</a></code>.</p></li>
<li><p>Search for <code><a href="../reference/deprecate_soft.html">deprecate_soft()</a></code> and replace with <code><a href="../reference/deprecate_soft.html">deprecate_warn()</a></code>.</p></li>
<li><p>Call <code><a href="../reference/deprecate_soft.html">deprecate_soft()</a></code> from newly deprecated functions.</p></li>
</ol>
<p>Don’t forget to update the badges in the documentation topics.</p>
</div>
<div id="find-out-what-deprecated-features-you-rely-on" class="section level3">
<h3 class="hasAnchor">
<a href="#find-out-what-deprecated-features-you-rely-on" class="anchor"></a>Find out what deprecated features you rely on</h3>
<p>Test whether your package depends on deprecated features directly or indirectly by setting the verbosity option in the <code>tests/testthat.R</code> file just before <code><a href="https://testthat.r-lib.org/reference/test_package.html">test_check()</a></code> is called:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://testthat.r-lib.org">testthat</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va">mypackage</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>lifecycle_verbosity <span class="op">=</span> <span class="st">"error"</span><span class="op">)</span>
<span class="fu"><a href="https://testthat.r-lib.org/reference/test_package.html">test_check</a></span><span class="op">(</span><span class="st">"mypackage"</span><span class="op">)</span></code></pre></div>
<p>This forces all deprecated features to fail. You can also set the relevant options manually to force warnings or errors in your session:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Force silence</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>lifecycle_verbosity <span class="op">=</span> <span class="st">"quiet"</span><span class="op">)</span>

<span class="co"># Force warnings</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>lifecycle_verbosity <span class="op">=</span> <span class="st">"warning"</span><span class="op">)</span>

<span class="co"># Force errors</span>
<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>lifecycle_verbosity <span class="op">=</span> <span class="st">"error"</span><span class="op">)</span></code></pre></div>
<p>Forcing warnings can be useful in conjuction with <code><a href="../reference/last_warnings.html">last_warnings()</a></code>, which prints backtraces for all the deprecation warnings issued during the last top-level command.</p>
</div>
<div id="test-deprecated-features" class="section level3">
<h3 class="hasAnchor">
<a href="#test-deprecated-features" class="anchor"></a>Test deprecated features</h3>
<p>Test whether a deprecated feature still works by setting <code>lifecycle_verbosity</code> to <code>"quiet"</code>:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://testthat.r-lib.org/reference/test_that.html">test_that</a></span><span class="op">(</span><span class="st">"`baz` argument of `foobar_adder()` still works"</span>, <span class="op">{</span>
  <span class="fu">withr</span><span class="fu">::</span><span class="fu"><a href="https://withr.r-lib.org/reference/with_options.html">local_options</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>lifecycle_verbosity <span class="op">=</span> <span class="st">"quiet"</span><span class="op">)</span><span class="op">)</span>
  <span class="fu">foobar_adder</span><span class="op">(</span><span class="fl">1</span>, baz <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>You can also set up verbosity for a whole testthat file within <code><a href="https://testthat.r-lib.org/reference/teardown.html">setup()</a></code> and <code><a href="https://testthat.r-lib.org/reference/teardown.html">teardown()</a></code> blocks:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://testthat.r-lib.org/reference/teardown.html">setup</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>lifecycle_verbosity <span class="op">=</span> <span class="st">"quiet"</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="https://testthat.r-lib.org/reference/teardown.html">teardown</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>lifecycle_verbosity <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<p>Test that a feature is correctly deprecated with <code><a href="../reference/expect_deprecated.html">expect_deprecated()</a></code> or <code><a href="../reference/expect_deprecated.html">expect_defunct()</a></code>:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://testthat.r-lib.org/reference/test_that.html">test_that</a></span><span class="op">(</span><span class="st">"`baz` argument of `foobar_adder()` is deprecated"</span>, <span class="op">{</span>
  <span class="fu"><a href="../reference/expect_deprecated.html">expect_deprecated</a></span><span class="op">(</span><span class="fu">foobar_adder</span><span class="op">(</span><span class="fl">1</span>, baz <span class="op">=</span> <span class="fl">2</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="fu"><a href="https://testthat.r-lib.org/reference/test_that.html">test_that</a></span><span class="op">(</span><span class="st">"`foo()` is defunct"</span>, <span class="op">{</span>
  <span class="fu"><a href="../reference/expect_deprecated.html">expect_defunct</a></span><span class="op">(</span><span class="fu">foo</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
<p>More control over verbosity can be exercised with the <code>lifecycle_verbosity</code> option. See <code><a href="../reference/verbosity.html">?verbosity</a></code>.</p>
</div>
</div>
<div class="footnotes">
<hr>
<ol>
<li id="fn1"><p>They can also be applied to individual arguments, or combinations of argument values.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
<li id="fn2"><p>This stage was previously called retired.<a href="#fnref2" class="footnote-back">↩︎</a></p></li>
<li id="fn3"><p>If the function goes through multiple deprecation stages, this stays the same.<a href="#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Lionel Henry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
